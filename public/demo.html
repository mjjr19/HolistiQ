<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HolistiQ - AI Personal Trainer Demo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Added marked.js for markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root {
            --primary: #A68BFF;           /* Main purple color */
            --primary-dark: #8F75EB;      /* Darker shade of purple for hover effects */
            --secondary: #FFD15C;         /* Yellow accent color for CTA buttons */
            --secondary-dark: #EBBD4C;    /* Darker yellow for hover effects */
            --dark: #202124;              /* Dark background color */
            --light: #F5F5F7;             /* Light color for contrast elements */
            --white: #FFFFFF;             /* White for card backgrounds */
            --gradient: linear-gradient(135deg, var(--primary) 0%, #8472FF 100%);
            
            /* Section-specific colors */
            --mental-health: #A68BFF;     /* Keep consistent with primary */
            --nutrition: #FFD15C;         /* Use accent color */
            --fitness: #7B68EE;           /* Slightly different purple shade */
            
            /* Card and shadow styles */
            --card-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            --hover-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            width: 100%;
        }

        /* Header */
        header {
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .logo span {
            color: var(--secondary);
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .btn {
            background: var(--gradient);
            color: var(--white);
            padding: 10px 20px;
            border-radius: 30px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary {
            background: var(--white);
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: var(--white);
        }

        .mobile-menu {
            display: none;
            font-size: 24px;
            cursor: pointer;
        }

        /* Main Content */
        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 40px 0;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 600px;
            max-width: 900px;
            margin: 0 auto;
            background-color: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            width: 100%;
        }

        .chat-header {
            background: var(--gradient);
            color: var(--white);
            padding: 20px;
            text-align: center;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
        }

        .chat-header h2 {
            margin: 0;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .message {
            max-width: 70%;
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 15px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            align-self: flex-end;
            background-color: var(--primary);
            color: var(--white);
            border-bottom-right-radius: 5px;
        }

        .bot-message {
            align-self: flex-start;
            background-color: var(--light);
            color: var(--dark);
            border-bottom-left-radius: 5px;
        }

        /* Markdown styling for bot messages */
        .bot-message h1, 
        .bot-message h2, 
        .bot-message h3 {
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .bot-message ul, 
        .bot-message ol {
            margin-left: 20px;
            margin-bottom: 10px;
        }

        .bot-message p {
            margin-bottom: 10px;
        }

        .bot-message code {
            background-color: rgba(0, 0, 0, 0.05);
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
        }

        .bot-message pre {
            background-color: rgba(0, 0, 0, 0.05);
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }

        .bot-message a {
            color: var(--primary);
            text-decoration: underline;
        }

        .message-time {
            font-size: 12px;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .chat-input {
            display: flex;
            padding: 15px;
            background-color: var(--light);
            border-top: 1px solid #CFD8DC;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 30px;
            margin-right: 10px;
            font-size: 16px;
            outline: none;
        }

        .chat-input button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient);
            color: var(--white);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chat-input button:hover {
            transform: scale(1.1);
        }

        .chat-input button:disabled {
            background: #B0BEC5;
            cursor: not-allowed;
            transform: none;
        }

        .typing-indicator {
            display: none;
            align-self: flex-start;
            background-color: var(--light);
            color: var(--dark);
            border-radius: 15px;
            padding: 10px 15px;
            margin-bottom: 15px;
            border-bottom-left-radius: 5px;
        }

        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: var(--dark);
            border-radius: 50%;
            margin-right: 5px;
            animation: typing 1s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .api-key-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .api-key-form {
            background-color: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 500px;
        }

        .api-key-form h3 {
            margin-top: 0;
            margin-bottom: 20px;
        }

        .api-key-form input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #CFD8DC;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 16px;
            outline: none;
        }

        .form-actions {
            display: flex;
            justify-content: space-between;
        }

        .intro-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .intro-section h1 {
            margin-bottom: 15px;
            color: var(--dark);
        }

        .intro-section p {
            max-width: 700px;
            margin: 0 auto 20px;
            color: #546E7A;
        }

        .features-list {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            background-color: var(--white);
            padding: 10px 15px;
            border-radius: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .feature-item i {
            color: var(--primary);
            margin-right: 8px;
        }

        /* Demo controls */
        .demo-controls {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .preset-button {
            background-color: var(--white);
            color: var(--dark);
            border: 1px solid #CFD8DC;
            border-radius: 30px;
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .preset-button:hover {
            background-color: var(--light);
        }

        .preset-button.active {
            background-color: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        /* Footer */
        footer {
            background-color: var(--dark);
            color: var(--light);
            text-align: center;
            padding: 20px 0;
            margin-top: auto;
        }

        /* Media Queries */
        @media (max-width: 768px) {
            .nav-links {
                position: fixed;
                top: 80px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 80px);
                background-color: var(--white);
                flex-direction: column;
                align-items: center;
                padding-top: 40px;
                transition: all 0.5s ease;
                z-index: 100;
            }

            .nav-links.active {
                left: 0;
            }

            .nav-links li {
                margin: 20px 0;
            }

            .mobile-menu {
                display: block;
            }

            .user-message, .bot-message {
                max-width: 85%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav>
                <a href="index.html" class="logo">Holisti<span>Q</span></a>
                <ul class="nav-links">
                    <li><a href="features.html">Features</a></li>
                    <li><a href="index.html#technology">Technology</a></li>
                    <li><a href="index.html#demo">Demo</a></li>
                    <li><a href="aboutus.html">About Us</a></li>
                    <li><a href="index.html#contact" class="btn">Contact</a></li>
                </ul>
                <div class="mobile-menu">
                    <i class="fas fa-bars"></i>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <section class="intro-section">
                <h1>AI Personal Trainer Demo</h1>
                <p>Experience the power of HolistiQ's AI personal trainer. Ask questions about nutrition, fitness routines, or get personalized recommendations based on your goals.</p>

                <div class="features-list">
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Nutrition Advice</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Workout Guidance</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Goal Setting</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Progress Tracking</span>
                    </div>
                </div>

                <div class="demo-controls">
                    <button class="preset-button" data-query="Can you suggest a healthy breakfast high in protein?">Breakfast Ideas</button>
                    <button class="preset-button" data-query="What's a good workout routine for beginners?">Beginner Workouts</button>
                    <button class="preset-button" data-query="How can I track my fitness progress effectively?">Progress Tracking</button>
                    <button class="preset-button" data-query="Can you suggest a meal plan for weight loss?">Weight Loss Plan</button>
                </div>
            </section>

            <div class="chat-container">
                <div class="chat-header">
                    <h2>HolistiQ AI Trainer</h2>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <!-- Messages will be added dynamically here -->
                    <div class="message bot-message">
                        👋 Hi there! I'm your HolistiQ AI Personal Trainer. How can I help you with your fitness and nutrition goals today?
                    </div>
                    <div class="typing-indicator" id="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="user-input" placeholder="Ask something about fitness, nutrition, or health..." />
                    <button id="send-button"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 HolistiQ. All rights reserved.</p>
    </footer>

    <!-- Connecting Modal (Replaces API Key Modal) -->
    <div class="api-key-modal" id="connecting-modal">
        <div class="api-key-form">
            <h3>Welcome to HolistiQ AI Trainer</h3>
            <p>Our AI personal trainer is ready to answer your questions about fitness, nutrition, and health. You can start by clicking one of the example questions above.</p>
            <div class="form-actions" style="justify-content: center;">
                <button class="btn" id="start-demo-button">Start Using AI Trainer</button>
            </div>
        </div>
    </div>

    <script>
        // Mobile Menu Toggle
        const mobileMenu = document.querySelector('.mobile-menu');
        const navLinks = document.querySelector('.nav-links');

        mobileMenu.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            mobileMenu.querySelector('i').classList.toggle('fa-bars');
            mobileMenu.querySelector('i').classList.toggle('fa-times');
        });

        // Chat Functionality
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const typingIndicator = document.getElementById('typing-indicator');
        const connectingModal = document.getElementById('connecting-modal');
        const startDemoButton = document.getElementById('start-demo-button');
        const presetButtons = document.querySelectorAll('.preset-button');

        // Show welcome modal on first visit
        if (!localStorage.getItem('holistiq-demo-started')) {
            connectingModal.style.display = 'flex';
        }

        // Start using the AI trainer
        startDemoButton.addEventListener('click', () => {
            localStorage.setItem('holistiq-demo-started', 'true');
            connectingModal.style.display = 'none';
        });

        // Format current time for message timestamp
        function getFormattedTime() {
            const now = new Date();
            return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        // Add a message to the chat - MODIFIED to use marked for formatting
        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(isUser ? 'user-message' : 'bot-message');

            // Convert markdown to HTML for bot messages only
            if (!isUser) {
                messageDiv.innerHTML = `
                    ${marked.parse(text)}
                    <div class="message-time">${getFormattedTime()}</div>
                `;
            } else {
                messageDiv.innerHTML = `
                    ${text}
                    <div class="message-time">${getFormattedTime()}</div>
                `;
            }

            typingIndicator.style.display = 'none';
            chatMessages.insertBefore(messageDiv, typingIndicator);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Show the typing indicator
        function showTypingIndicator() {
            typingIndicator.style.display = 'block';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Predefined responses for demo mode - UPDATED to use markdown format
        const demoResponses = {
            "Can you suggest a healthy breakfast high in protein?": 
                "Absolutely! Here's a high-protein breakfast idea:\n\n## Greek Yogurt Parfait\n\n**Ingredients:**\n- 1 cup Greek yogurt (24g protein)\n- 1/4 cup walnuts (4g protein)\n- 1 tbsp chia seeds (2g protein)\n- 1/2 cup berries\n- Drizzle of honey\n\nThis breakfast provides approximately 30g of protein, plus healthy fats and antioxidants from the berries. It's quick to prepare and will keep you full until lunch!",

            "What's a good workout routine for beginners?": 
                "Here's a beginner-friendly workout routine you can do 3 times per week:\n\n## 🏋️ Full Body Circuit\n\n1. Bodyweight squats: 3 sets of 10\n2. Modified push-ups: 3 sets of 8\n3. Walking lunges: 3 sets of 10 per leg\n4. Glute bridges: 3 sets of 12\n5. Plank: 3 sets, hold for 20-30 seconds\n\nRest 60 seconds between exercises and 2 minutes between circuits. Focus on proper form rather than speed. As you get stronger, gradually increase reps and sets!",

            "How can I track my fitness progress effectively?": 
                "Great question! Here are effective ways to track your fitness progress:\n\n## 📊 Progress Tracking Methods\n\n1. **Measurements**: Take body measurements every 2-4 weeks\n2. **Progress photos**: Take photos from the same angle and lighting monthly\n3. **Performance metrics**: Track weights lifted, reps completed, or workout duration\n4. **Fitness tests**: Regularly test specific exercises (push-ups in 1 min, 1-mile time)\n5. **Energy levels**: Keep a journal of how you feel during/after workouts\n\nIn the HolistiQ app, you'll be able to log all these metrics in one place and see visual progress over time!",

            "Can you suggest a meal plan for weight loss?": 
                "Here's a sample day from a balanced weight loss meal plan:\n\n## 🍽️ Weight Loss Meal Plan\n\n**Breakfast:** Veggie omelet (2 eggs + spinach, peppers, onions) with 1/4 avocado and 1 slice whole grain toast\n\n**Lunch:** Grilled chicken salad with mixed greens, cherry tomatoes, cucumber, and 1 tbsp olive oil dressing\n\n**Snack:** Apple with 1 tbsp almond butter\n\n**Dinner:** Baked salmon (4oz) with roasted brussels sprouts and sweet potato\n\n**Evening:** Greek yogurt with berries\n\nThis plan focuses on protein, fiber, and healthy fats to keep you satisfied while maintaining a calorie deficit. Remember to stay hydrated and adjust portions based on your specific calorie needs!"
        };

        // Get response from our backend API that proxies to OpenAI
        async function getAIResponse(userMessage) {
            try {
                // For demo purposes, we'll use a mix of real API calls and fallback responses
                // In production, always use the server endpoint

                // Try to connect to our backend server
                try {
                    const response = await fetch('/api/chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            messages: [
                                {
                                    role: 'system',
                                    content: `You are a highly knowledgeable AI personal trainer and nutritionist for HolistiQ, an innovative fitness and nutrition platform.

Your goals are to:
1. Provide scientifically-backed advice on nutrition, exercise, and wellness
2. Personalize recommendations based on the user's goals and preferences
3. Be encouraging, positive, and motivational
4. Use emojis and formatting (bold, bullet points) to make responses engaging
5. Keep responses concise but informative (200-300 words maximum)
1. Personalized Meal Plans
The assistant creates customized meal plans based on the user’s fitness goals (e.g., weight loss, muscle gain, maintenance) and their daily caloric needs. If calories are unknown, prompt the users for the necessary inputs to calculate the calories. The meal plan can also be saved to a document and formatted in a nice way for the user to use.

Key Feature: It goes a step further by incorporating cultural and ethnic preferences. Users can specify their cultural background or food preferences (e.g., Mediterranean, Asian, vegetarian, etc.), and the assistant will recommend recipes or ingredient swaps that align with their tastes while still meeting their nutritional goals. It also additionally includes total calorie, macronutrient, and micronutrient summaries for the day. 

2. Personalized Workout Plan: Creates a workout plan based on user preferences (range of workout duration, goals (weight loss, hypertrophy, athletic, sports, general, mobility, injury recovery, etc.). With user feedback, it can adjust the workout as needed. The workout plan can also be saved to a document and formatted in a nice way for the user to use.

2. Body Scan Integration
Users can input a body scan, and the assistant will analyze their body type, BMR (Basal Metabolic Rate), and other metrics.

Based on this data, it generates a tailored workout plan that aligns with their goals (e.g., strength training, cardio, flexibility) and fits into their weekly schedule.

3. Hydration Guidance
The assistant calculates and reminds users of their daily water intake based on their body weight, activity level, and climate.

4. Dynamic Workout Adjustments
The assistant can recommend additional workouts or modify existing ones based on how the user’s body feels.

It considers factors like muscle soreness, Rate of Perceived Exertion (RPE), and which muscle groups were worked the previous day to ensure balanced and effective training.

5. Adaptive Scheduling
If a user is feeling fatigued or sore, the assistant can adjust their workout or meal schedule to better suit their current physical state.

6. Grocery Recommendations
The assistant can suggest the best local grocery stores or markets based on the user’s location, helping them find fresh, affordable, and culturally relevant ingredients.

7. Additional Features
Meal recommendations: Users can upload pictures of menu items from a restaurant. The GPT will recommend the best option for the user based on their goals. It will give a detailed breakdown of the meal including calories and macronutrients.
Progress Tracking: Users can log their progress, and the assistant will provide insights and adjustments to keep them on track.


SPECIAL USE CASES - Follow these specific protocols:

1. BUSY PROFESSIONALS & MEAL PLANNING:
   - If someone mentions being busy, having limited time, or needing quick meal options
   - Ask: "Would you prefer restaurant recommendations, quick snacks from a grocery store, or simple homemade options?" Wait for them to respond. 
   - Provide specific recommendations based on their response, emphasizing nutrient-dense options and even recommend some popular brands and where to buy from
   - Suggest meal prep strategies for busy schedules


If they say snacks, recommend one of the ones below:

Here are ten healthy snack brands, including their calories, health benefits, and where to buy them:

Siete Grain Free Tortilla Chips

Calories: 130 per serving

Health Benefits: Gluten-free, vegan, made with avocado oil which supports heart health.

Where to Buy: Available at health food stores and online at Amazon.

PopChips

Calories: 120 per serving

Health Benefits: Lower in fat and calories compared to fried chips, made from real potatoes.

Where to Buy: Widely available at grocery stores like Kroger and online at Amazon.

Brad’s Crunchy Kale

Calories: 90 per bag

Health Benefits: Made from air-dried kale, rich in vitamins C and E, magnesium.

Where to Buy: Available at health food stores and online at their official website.

Hippeas Chickpea Tortilla Chips

Calories: 140 per serving

Health Benefits: Gluten-free, vegan, high in protein and fiber.

Where to Buy: Available at 7-Eleven and online at Amazon.

Biena Sea Salt Roasted Chickpeas

Calories: 120 per serving

Health Benefits: High in protein and fiber, plant-based.

Where to Buy: Available at health food stores and online at their official website.

KIND Dark Chocolate Nuts & Sea Salt Bars

Calories: Approximately 200 per bar

Health Benefits: Made with heart-healthy almonds, gluten-free, low glycemic index.

Where to Buy: Widely available at grocery stores like Harris Teeter and online at Amazon.

Larabar Lemon Bars

Calories: 200 per bar

Health Benefits: Made with simple natural ingredients, vegan, gluten-free.

Where to Buy: Available at health food stores and online at The Better Health Store.

RXBAR Chocolate Sea Salt

Calories: Approximately 210 per bar

Health Benefits: Made with egg whites, nuts, and dates, no artificial ingredients.

Where to Buy: Available at health food stores and online at their official website.

Health Warrior Coconut Chia Seed Bars

Calories: 100 per bar

Health Benefits: High in fiber and omega-3s, plant-based, low sugar.

Where to Buy: Available at health food stores and online at Kroger.

Terra Real Vegetable Chips

Calories: 160 per serving

Health Benefits: Made from a variety of root vegetables, gluten-free, no GMO ingredients.

Where to Buy: Available at health food stores and online at Amazon.

These snacks offer a mix of nutritional benefits and are available at various retailers both online and in-store. Then state why it is perfect for your situation.
2. FITNESS FORM CHECKS:
   - If someone mentions uploading or checking their exercise form
   - Provide specific form cues for common exercises (especially bicep curls)
   - Explain proper technique with clear step-by-step instructions
   - Mention common mistakes to avoid
   - Suggest the HolistiQ app can provide real-time form analysis through computer vision technology
If a user mentions having limited time to work out (such as "only have X minutes to workout" or similar phrasing):

1. Respond with a brief acknowledgment that limited time workouts can still be effective
2. Create a time-efficient workout that matches the time constraint mentioned
3. Structure the response as follows
Know that today is Saturday of the user's Workout Plan and that it is Active Recovery Day. Then provide the recovery workout. 
   - Brief introduction (1 sentence)
   - Warm-up section (2-3 minutes)
   - Main workout circuit or intervals (majority of available time)
   - Cool down section (1-2 minutes)
   - Concluding motivational statement
4. Include specific exercises with:
   - Clear rep counts or time durations
   - Rest intervals if applicable
   - Modifications for different fitness levels when possible
5. Use markdown formatting:
   - Header for the workout name
   - Bold text for section headers (warm-up, circuit, cool down)
   - Lists for exercise sequences
6. Mention that the HolistiQ app automatically adjusts weekly plans to compensate for shorter sessions
7. Use a supportive, encouraging tone throughout
8. Keep the entire response between 200-300 words
9. Include 1-2 relevant emojis for visual appeal

3. MENTAL HEALTH & STRESS MANAGEMENT:
   - If someone mentions stress, anxiety, or mental health concerns
   - First ask: "Have you eaten recently? Poor nutrition can impact stress levels." Wait for their response. If they said yes, recommend a walk or meditation. If not, recommend specific foods to help stress reduction.
   - Recommend specific foods known to help with stress reduction
   - Suggest a short walk or physical activity
   - Recommend a 10-minute meditation and mention that HolistiQ integrates with services like Headspace
   - Emphasize the connection between physical and mental wellbeing
   - Prompt the user if they would like a 10 minute meditation from Headspace

4. Cultural Diet Adaptation
When a user mentions a cultural dish like fried rice or butter chicken or burritos, ask: "Would you like a version that is (1) lower in calories, (2) made with healthier ingredient swaps, or (3) the original recipe with portion guidance?"
Wait for their response. If they choose 1, 2, or 3, immediately provide the appropriate version of the recipe.
Do NOT ask the question again if they have already answered.
If they respond with "low calorie," "healthy swaps," or "original," recognize it as a selection and proceed to generate the correct recipe.
Provide the calorie count, macronutrient breakdown, meal prep tips, and grocery recommendations.
If they ask for a modification (e.g., "Make it spicier"), adjust the recipe and explain the change instead of restarting the conversation.

Always maintain a supportive, understanding tone and emphasize how the full HolistiQ app provides even more personalized guidance.`
                                },
                                {
                                    role: 'user',
                                    content: userMessage
                                }
                            ]
                        })
                    });

                    const data = await response.json();
                    return data.choices[0].message.content;
                } catch (error) {
                    // If server connection fails, use pre-defined responses
                    console.log("Server connection failed, using fallback responses");
                    return getDemoResponse(userMessage);
                }
            } catch (error) {
                console.error('Error:', error);
                return "I'm sorry, there was an error with our AI service. Please try again later.";
            }
        }

        // Get predefined responses for demo/fallback mode
        function getDemoResponse(userMessage) {
            // Check if we have a predefined response
            const knownResponses = demoResponses;

            // Return matching response or generic response
            return knownResponses[userMessage] || 
                "Thanks for your question! The HolistiQ AI personal trainer can provide personalized nutrition and workout advice based on your specific goals and preferences. In the full version of our app, I'd offer customized recommendations just for you. For now, try one of the sample questions above to see how I can help with specific fitness and nutrition topics!";
        }

        // Send Message
        async function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;

            // Add user message to chat
            addMessage(message, true);
            userInput.value = '';
            sendButton.disabled = true;
            showTypingIndicator();

            // Add a realistic delay to simulate AI thinking
            setTimeout(async () => {
                try {
                    // Get response from our AI service
                    const response = await getAIResponse(message);
                    addMessage(response);
                } catch (error) {
                    addMessage("I'm sorry, there was an error processing your request. Please try again.");
                }
                sendButton.disabled = false;
            }, 1000);
        }

        // Event Listeners
        sendButton.addEventListener('click', sendMessage);

        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Preset Questions
        presetButtons.forEach(button => {
            button.addEventListener('click', () => {
                const query = button.getAttribute('data-query');
                userInput.value = query;
                sendMessage();

                // Toggle active class
                presetButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
            });
        });
    </script>
</body>
</html>